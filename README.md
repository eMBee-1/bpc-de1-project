# PWM-Based Tone Generator (VUT FEKT BPC-DE1)



## Team members
- Adámek Karel
  - Responsible for display_driver block
- Béger Matúš
  - Responsible for clocking and documentation
- Bílek Tomáš
  - Responsible for display_driver block
- Bulva Vítězslav
  - Responsible for PWM block

## Theoretical description and explanation
The subject of the project is the creation and implementation of a tone generator based on PWM. This type of signal generator uses, as the name suggests, pulse width modulation. Thanks to this we are able to take the base frequency generated by FPGA and modulate it to pulses. As audio out on the FPGA board is controlled binary, we can use modulated signals as logic 1 and 0 to create tones and so sounds.

This picture shows our block schematics for the PWM Tone generator implementation.
![navrh_pwm.png](/Assets/navrh_pwm.png)

## Hardware description of demo application
This project is developed for Nexys A7-50T board. For inputs and controls, we decided to use the central button - BTNC (number 13) as our reset button, then switches (number 18) for changing different tones. As outputs implementation uses an audio jack (number 8) to which we can connect speakers or headphones then 4 digits of seven-segment display (number 21) and LEDs above switches (number 19). The display and LEDs show the selected tone as a duty cycle in binary. 

![Nexys A7-50T](https://digilent.com/reference/_media/reference/programmable-logic/nexys-a7/nexys-a7-callout.png?cache=)

## Software description
The top level is constructed with 3 main blocks namely [PWM_clock](https://github.com/eMBee-1/bpc-de1-project/blob/main/PWM_ToneGenerator/Project.srcs/sources_1/new/PWM_clock.vhd), [display_driver](https://github.com/eMBee-1/bpc-de1-project/blob/main/PWM_ToneGenerator/Project.srcs/sources_1/new/display_driver.vhd) and [PWM](https://github.com/eMBee-1/bpc-de1-project/blob/main/PWM_ToneGenerator/Project.srcs/sources_1/new/PWM.vhd).

### PWM_clock
This block uses as input a 100MHz base clock provided by FPGA and a period of 200 000 (2 ms) to generate a pulse signal for the PWM block, which operates with it as a clocking signal. Another input for PWM_clock is the button BTNC for resetting the counter.

### Display_driver
The block is responsible for generating a high-frequency refresh rate for a seven-segment display so all 4 digits are lit up and show the right duty cycle, which was delivered in the data input. Also ensures the right amount of LEDs that must be illuminated. Display_driver contains 2 components, [clock_enale](https://github.com/eMBee-1/bpc-de1-project/blob/main/PWM_ToneGenerator/Project.srcs/sources_1/new/clock_enable.vhd) with period 400 000 that securely generate high enough frequency so the human eye can see all digits lit up all the time and [bin2seg](https://github.com/eMBee-1/bpc-de1-project/blob/main/PWM_ToneGenerator/Project.srcs/sources_1/new/bin2seg.vhd) that ensures illumination of segments. Display_driver then connects these components, turns off the decimal points, processes incoming data from switches, and switches off the display if records reset signal from button BTNC.

### PWM
PWM block is clocked by PWM_clock output. With the right clock and input from switches, it works like a counter that enables and disables the output pwm_out. This output is then, in the top_level, connected to AUD_PWM in other words audio jack. Also contains rst input for resetting the counter if button BTNC is pressed.

## Instructions
- use 6 switches from the right side to change the generated tone, switch on only one at a time
- use the central button BTNC for resetting the tone generator (turns off the audio, display and LEDs)

Demonstration video:

https://github.com/eMBee-1/bpc-de1-project/assets/99298411/e831873c-3e98-4163-af17-55dc537e7f4e

## References
https://digilent.com/reference/programmable-logic/nexys-a7/reference-manual
